<Calculator>:
    BoxLayout:
        orientation: 'vertical'
        TopMenu:
        Abacus:
        BoxLayout:
            orientation: 'horizontal'
            Ledger:
            OperationsBar:
            CuneiformDrawingInput:
                TopRightButton:

<TopMenu>:
    size_hint_y: None
    height: 32
    canvas:
        Color:
            rgb: 1, 0, 0
        Rectangle:
            size: self.size
            pos: self.pos

<Abacus>:
    canvas.before:
        Color:
            rgb: 0.4, 0.4, 0.4, 1
        Rectangle:
            source: 'assets/graphics/wood.png'
            size: self.size
            pos: self.pos

<Ledger>:
    size_hint_x: 1.6
    canvas:
        Color:
            rgba: 1, 1, 1, 1
        Rectangle:
            pos: map(lambda a: a + 7, self.pos)
            size: map(lambda a: a - 14, self.size)
            source: 'assets/graphics/sandstone.jpg'  # TODO: make this platform independent?

<OperationsBar>:
    size_hint_x: None
    width: 48
    canvas:
        Color:
            rgb: 1, 1, 0
        Rectangle:
            size: self.size
            pos: self.pos
    BoxLayout:
        orientation: 'vertical'
        pos: self.parent.pos
        size: self.parent.size
        Button:
            text: '+'
        Button:
            text: '-'
        Button:
            text: '*'
        Button:
            text: '/'
        Button:
            text: 'sqrt'


<CuneiformDrawingInput>:
    canvas.before:
        Color:
            rgb: 1, 1, 1, 1
        Rectangle:
            source: 'assets/graphics/sandbox.jpg'
            size: self.size
            pos: self.pos

<TopRightButton>:
    size_hint: 50, 50
    #:set offset 10
    Button:
        size: self.parent.size_hint
        background_color: .5, .5, .5, 1 
        x: self.parent.parent.x + self.parent.parent.size[0] - self.size[0] - offset
        y: self.parent.parent.y + self.parent.parent.size[1] - self.size[1] - offset
        on_press:
            self.background_color = 0, 0, 0.055
            self.parent.parent.click()
        on_release:
            self.background_color = .5, .5, .5, 1 
        canvas.before:
            Color:
                rgba: self.background_color
            Line:
                width: 2
                rectangle: self.x, self.y, self.width, self.height
        Image:
            source: self.parent.parent.parent.buttonImage()
            center_x: self.parent.center_x
            center_y: self.parent.center_y
            allow_stretch: True
            size: self.parent.size
